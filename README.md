# fgo无限池按键精灵脚本
fgo无限池按键精灵全自动爆肝脚本（能力较差，只能做到这个程度请大佬体谅）。

仅限安卓Mumu模拟器，其他模拟器如果有需要请自行修改代码段。

正赛之后的脚本要等开始之后再写。大概到时候会是狂兰绿卡队配置。

如果是第一次使用按键精灵，请按照下面步骤做一次：

1. 右键，点击兼容性疑难解答
2. 点击疑难解答程序
3. 点击 程序已打开，但未正确显示
4. 点击 当选择较大的字体设置时程序无法正确显示
5. 点击测试程序，然后关闭按键精灵
6. 在兼容性疑难解答中点击 是，为此程序保留这些设置

### 注意事项

* 不同电脑像素格位置和颜色不一样，需要更改。对自己的设备，脚本开头的参数全部都得自己用抓抓来选择，不只是像素点颜色，像素点位置也可能要根据自己的设备自己抓！
* 修改pycolor为自己电脑上对应的pyframeX，pyframeY的像素颜色，这几个参数用于确定是否处于助战界面。pygreen开头的几个参数是寻找右侧好友的绿色标志用的，一定要修改。pyframeYdiff是两个助战框的Y轴距离。要注意，每个助战框的绿色好友标志对应位置颜色*居然*不是一样的，用抓抓来测量两个好友标志对应像素点的Y轴距离，并分别记录两个颜色为pygreencolor和pygreencolor2。


* firstappleY和firstappleY2也是非常重要的需要自改的部分！这两个参数要保证在体力>=40的时候，不会点击到好友的助战。
* goldenappleX，Y，color是每一局结束之后连续出击界面吃苹果的选取像素格，用来判断当前是进入吃苹果阶段了还是体力大于等于40直接进选助战阶段了。可以把这几个参数改成银苹果铜苹果的对应格和颜色，吃苹果的时候会点这个像素点，就可以换吃银或者铜苹果。
* skillwindow，servantwindow，turn，lizhuang开头的这些参数是战斗时用于自动排错的，战斗中点开一个从者信息栏或者技能信息栏抓取对应像素格即可获得前两个，turn是顶部回合数用来判断当前是第几回合的。~~太懒了不想学着搞图像识别了直接整个像素点随便弄一下得了~~。lizhuang这些是战利品或者羁绊到10获得新礼装了，进了新概念礼装界面用来排错的……很少会遇到，可以不管。
* 防止使用到没打技能本的助战，脚本只会选取好友的助战，所以最好提前清理掉助战拐没有310的好友。最后几个参数是助战选择，推荐用技能图标来判断，头像框因为灵基再临阶段不同很难统一。比如caber的蓝魔放技能颜色很明显，这样就不会选错助战选到孔明之类的，并且也不会受到好友再临阶段设置影响。当然不排除因此选到了玉藻前导致脚本gg~~建议删好友~~，请自行斟酌。

### 更新日记

**2021年9月21日**

目前脚本已经稳定，几乎只需要花10分钟稍微修改一些原本的参数就可以直接上手刷，bug目前没遇到过，估计之后不会对逻辑再进行大幅度更新了。如果有别的配置想用也可以改一下前面几个参数，然后自己录一段，粘贴进去就能直接跑。

**2020年10月6日** 

加入了助战选择的新逻辑，主要体现在可以判断第二位助战是谁、选择第二位助战以及缩短刷新列表的时间（孔明挂的人太少了，难受）。加入了一个自动解决结算界面死循环的模块，可能没什么用还会导致更多bug。

**2020年10月7日**

在昨天的自动解决结算界面死循环的位置，加入了自动排错机制。如果在某一步触发了自动排错，那么必然此时游戏逻辑已经走到助战选择位置。将助战30次刷新不到判断为需要排错。排错机制完成之后将会回到脚本最最开始的界面。

**2020年12月4日**

新增了满羁绊时获得羁绊礼装的退出判断，减少了刷新助战的等待时间

**2021年12月21日**

注意到了一个bug：如果对应选择的苹果没有了，在程序走到助战判断时会误吃一个圣晶石，然后选助战程序正常执行。如果放着不管的话彩苹果会莫名消失哦：）

## 当前活动

（2021圣诞无限池）目前可以使用的配置以及关卡（站位顺序从左到右）（会持续更新）：

* 二期：90枪本，水武藏（加成礼装，二宝，90级，1-10-10）+caber（90级，10-10-10）+助战caber（同前）+极地服

